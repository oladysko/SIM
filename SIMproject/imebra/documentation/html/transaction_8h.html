<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>imebra: transaction.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="style.1.7.5.1.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">imebra
   &#160;<span id="projectnumber">build 2013-09-04_11-02-26</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>User&#160;manual</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('transaction_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a> &#124;
<a href="#define-members">Defines</a>  </div>
  <div class="headertitle">
<div class="title">transaction.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Declaration of the classes that allow to use the transactions on the writing handlers (see dataHandler).  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;../../base/include/configuration.h&quot;</code><br/>
<code>#include &quot;../../base/include/thread.h&quot;</code><br/>
<code>#include &quot;../../base/include/baseObject.h&quot;</code><br/>
<code>#include &quot;../../base/include/exception.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="data_handler_8h.html">dataHandler.h</a>&quot;</code><br/>
<code>#include &lt;typeinfo&gt;</code><br/>
<code>#include &lt;map&gt;</code><br/>
<code>#include &lt;list&gt;</code><br/>
</div><table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpuntoexe_1_1imebra_1_1transaction.html">puntoexe::imebra::transaction</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents a single transaction.  <a href="classpuntoexe_1_1imebra_1_1transaction.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">namespace &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacepuntoexe.html">puntoexe</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>The base services and classes are defined in this namespace. </p>
<br/></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#aa9e5ca09eb91480c731e54f24ad2f14c">IMEBRA_COMMIT_TRANSACTION_START</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a committing transaction block.  <a href="#aa9e5ca09eb91480c731e54f24ad2f14c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a5b824bcd583d54536ede4a7058d8dffe">IMEBRA_TRANSACTION_START</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a non-committing transaction block.  <a href="#a5b824bcd583d54536ede4a7058d8dffe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#ad9ba484b96e7f19f9f93fd5a0d0cf8a9">IMEBRA_TRANSACTION_END</a>()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Terminates a transaction block initiated by <a class="el" href="transaction_8h.html#aa9e5ca09eb91480c731e54f24ad2f14c" title="Start a committing transaction block.">IMEBRA_COMMIT_TRANSACTION_START()</a> or <a class="el" href="transaction_8h.html#a5b824bcd583d54536ede4a7058d8dffe" title="Start a non-committing transaction block.">IMEBRA_TRANSACTION_START()</a>.  <a href="#ad9ba484b96e7f19f9f93fd5a0d0cf8a9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="transaction_8h.html#a19884c8c80b10da670c1525a22134bb9">IMEBRA_TRANSACTION_ABORT</a>()&#160;&#160;&#160;imebraNestedTransaction.abort();</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete the modifications made in the transaction's block before this macro is called.  <a href="#a19884c8c80b10da670c1525a22134bb9"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Declaration of the classes that allow to use the transactions on the writing handlers (see dataHandler). </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="aa9e5ca09eb91480c731e54f24ad2f14c"></a><!-- doxytag: member="transaction.h::IMEBRA_COMMIT_TRANSACTION_START" ref="aa9e5ca09eb91480c731e54f24ad2f14c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMEBRA_COMMIT_TRANSACTION_START</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{\
                PUNTOEXE_FUNCTION_START(L<span class="stringliteral">&quot;Imebra Commit Transaction&quot;</span>);\
                puntoexe::imebra::transaction imebraNestedTransaction(<span class="keyword">true</span>);\
                try{
</pre></div>
<p>Start a committing transaction block. </p>
<p>The transaction block must be terminated by the macro <a class="el" href="transaction_8h.html#ad9ba484b96e7f19f9f93fd5a0d0cf8a9" title="Terminates a transaction block initiated by IMEBRA_COMMIT_TRANSACTION_START() or IMEBRA_TRANSACTION_S...">IMEBRA_TRANSACTION_END()</a>.</p>
<p>All the writing data handlers that are created in the transaction's block will commit the modifications only at the end of the transaction's block. If one of the modifications cannot be committed or if an uncaught exception occurs, then all the buffers are rolled back to the status they had at the beginning of the transaction.</p>
<p>Committing transactions commit also the data of the nested non-committing transactions </p>

</div>
</div>
<a class="anchor" id="a19884c8c80b10da670c1525a22134bb9"></a><!-- doxytag: member="transaction.h::IMEBRA_TRANSACTION_ABORT" ref="a19884c8c80b10da670c1525a22134bb9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMEBRA_TRANSACTION_ABORT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;imebraNestedTransaction.abort();</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Delete the modifications made in the transaction's block before this macro is called. </p>
<p>This macro is called by <a class="el" href="transaction_8h.html#ad9ba484b96e7f19f9f93fd5a0d0cf8a9" title="Terminates a transaction block initiated by IMEBRA_COMMIT_TRANSACTION_START() or IMEBRA_TRANSACTION_S...">IMEBRA_TRANSACTION_END()</a> in case an uncaught exception is detected. </p>

</div>
</div>
<a class="anchor" id="ad9ba484b96e7f19f9f93fd5a0d0cf8a9"></a><!-- doxytag: member="transaction.h::IMEBRA_TRANSACTION_END" ref="ad9ba484b96e7f19f9f93fd5a0d0cf8a9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMEBRA_TRANSACTION_END</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">}\
                catch(...)\
                {\
                        imebraNestedTransaction.abort();\
                        PUNTOEXE_RETHROW(<span class="stringliteral">&quot;Transaction aborted&quot;</span>);\
                }\
                PUNTOEXE_FUNCTION_END();\
        }
</pre></div>
<p>Terminates a transaction block initiated by <a class="el" href="transaction_8h.html#aa9e5ca09eb91480c731e54f24ad2f14c" title="Start a committing transaction block.">IMEBRA_COMMIT_TRANSACTION_START()</a> or <a class="el" href="transaction_8h.html#a5b824bcd583d54536ede4a7058d8dffe" title="Start a non-committing transaction block.">IMEBRA_TRANSACTION_START()</a>. </p>
<p>If the macro terminates a committing transaction then it tries to commit all the changes made through the writing handlers, otherwise it passes the modifications to the parent transaction.</p>
<p>If an uncaught exception occurs or one of the changes cannot be committed, then all the modifications are rolled back to the status they had at the beginning of the transaction.</p>
<p>Uncaught exceptions are rethrown by this macro. </p>

</div>
</div>
<a class="anchor" id="a5b824bcd583d54536ede4a7058d8dffe"></a><!-- doxytag: member="transaction.h::IMEBRA_TRANSACTION_START" ref="a5b824bcd583d54536ede4a7058d8dffe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IMEBRA_TRANSACTION_START</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment">{\
                PUNTOEXE_FUNCTION_START(L<span class="stringliteral">&quot;Imebra Transaction&quot;</span>);\
                puntoexe::imebra::transaction imebraNestedTransaction(<span class="keyword">false</span>);\
                try{
</pre></div>
<p>Start a non-committing transaction block. </p>
<p>The transaction block must be terminated by the macro <a class="el" href="transaction_8h.html#ad9ba484b96e7f19f9f93fd5a0d0cf8a9" title="Terminates a transaction block initiated by IMEBRA_COMMIT_TRANSACTION_START() or IMEBRA_TRANSACTION_S...">IMEBRA_TRANSACTION_END()</a>.</p>
<p>If the transaction is not nested into another one, then a committing transaction is created anyway, as in <a class="el" href="transaction_8h.html#aa9e5ca09eb91480c731e54f24ad2f14c" title="Start a committing transaction block.">IMEBRA_COMMIT_TRANSACTION_START()</a>.</p>
<p>All the writing data handlers that are created in the transaction's block will commit the modifications only at the end first parent committing transaction. If one of the modifications cannot be committed or if an uncaught exception occurs, then all the buffers are rolled back to the status they had at the beginning of the transaction. </p>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="transaction_8h.html">transaction.h</a>      </li>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


    <li class="footer">
    <a href="http://imebra.com">Imebra.com</a></li>
   </ul>
 </div>


</body>
</html>
